<!DOCTYPE html>
<html lang="zh-CN">
    <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <link rel="alternate icon" type="image/png" href="/img/favicon.png">
    <link rel="sitemap" type="application/xml" title="Sitemap" href="https://www.orionwang.com/sitemap.xml">
    <link rel="alternate" type="application/atom+xml" title="OrionWang" href="https://www.orionwang.com/atom.xml">

    <!-- Title and Subtitle -->
    <title>插件 -OrionWang - Blog</title>

    <!-- Meta Tags -->
    <meta name="description" content="背景介绍在即刻上发了我使用 ChatGPT 开发的浏览器插件“Bossfinder-一键快速搜公司”，有网友在求教程，趁着周末有空，就写个教程来记录下自己是如何使用 ChatGPT 来开发这个插件的。本教程面向对开发浏览器插件感兴趣，但是无代码经验的人，我会一步一步的展示我是如何开发这个插件的，欢迎">
    <meta name="keywords" content="创造者博客, 产品设计, 工具分享, 读书笔记, 个人成长, 独立开发, 摄影, 数码产品">
    <meta name="author" content="orionwang">
    <meta name="language" content="zh-CN">

    <!-- CSS Files -->
    
<link rel="stylesheet" href="/css/reset.css">

    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/markdown.css">

    
<link rel="stylesheet" href="/css/a11y-dark.min.css">

    
<link rel="stylesheet" href="/css/custom.css">


    <!-- JavaScript Files -->
    <script src="/js/highlight.min.js"></script>
    <script src="/js/highlightjs-line-numbers.js"></script>
    <script src="/js/copy-code.js"></script>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5TP59B9VDG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5TP59B9VDG');
</script>
<meta name="generator" content="Hexo 7.2.0"></head>

    <body>
        <div class="paper">
            <div class="paper-main">
                <div class="post-header">
    <a class="logo" href="/">OrionWang</a>
</div>
<div class="post-main">

    
    
        <div class="post-main-title">
            <h1>插件</h1>
        </div>
        <div class="post-content-meta">
            2024-08-20
        </div>
        <div class="post-md">
            <h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><p>在即刻上发了我使用 ChatGPT 开发的浏览器插件“Bossfinder-一键快速搜公司”，有网友在求教程，趁着周末有空，就写个教程来记录下自己是如何使用 ChatGPT 来开发这个插件的。本教程面向对开发浏览器插件感兴趣，但是无代码经验的人，我会一步一步的展示我是如何开发这个插件的，欢迎大家转发收藏。</p>
<h3 id="本文目标"><a href="#本文目标" class="headerlink" title="本文目标"></a>本文目标</h3><p><strong>以“Bossfinder-一键快速搜公司”为例，展示零代码经验如何使用ChatGPT 来开发一个简单的浏览器插件，为对浏览器拓展感兴趣的同学一些参考</strong>。</p>
<p>正式开始之前，对浏览器拓展更多信息感兴趣的同学，可以看下下面chrome 官方对浏览器拓展的定义。当然不感兴趣的，可以跳过。</p>
<p><strong>Google 对于浏览器拓展的官方定义是：Chrome 扩展程序通过自定义用户界面、观察浏览器事件和修改网页来增强浏览体验</strong>。您可以使用与创建 Web 应用程序相同的 Web 技术来构建扩展： <a target="_blank" rel="noopener" href="https://web.dev/learn/html">HTML</a> 、 <a target="_blank" rel="noopener" href="https://web.dev/learn/css">CSS</a>和<a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Learn/JavaScript">JavaScript</a>。除了<a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/API">Web API</a>之外，扩展程序还可以访问<a target="_blank" rel="noopener" href="https://developer.chrome.com/docs/extensions/reference">Chrome 扩展程序 API</a>来完成不同的任务。这里是：Google chrome 拓展的官方文档<a target="_blank" rel="noopener" href="https://developer.chrome.com/docs/extensions">Chrome Extensions  |  Chrome for Developers</a>，愿意了解更多的信息的，可以点进去看看。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="工具和环境设置"><a href="#工具和环境设置" class="headerlink" title="工具和环境设置"></a>工具和环境设置</h3><ol>
<li><strong>浏览器</strong></li>
</ol>
<ul>
<li><strong>Chrome浏览器</strong>：开发 Chrome 插件的主要平台，确保要使用最新版本。如果你日常使用Edge浏览器，也可以选择Edge浏览器，两个浏览器的拓展基本可以通用。</li>
</ul>
<ol start="2">
<li><strong>打开浏览器的开发者模式</strong></li>
</ol>
<ul>
<li><p><strong>Chrome浏览器开发者模式</strong>：在浏览器地址栏输入 <code>chrome://extensions/</code>，点击进入拓展管理页面</p>
<p><img src="https://raw.githubusercontent.com/Alanrk/blogimg/main/202408201055853.png"></p>
</li>
</ul>
<p>Chrome 浏览器在打开的拓展管理页面，打开页面右上角的【开发者模式】</p>
<p><img src="https://raw.githubusercontent.com/Alanrk/blogimg/main/202408201057796.png"><br>3. <strong>下载文本编辑器，用于编辑代码，任意一个就可以</strong></p>
<ul>
<li><p><strong>VS Code</strong>：广受欢迎的免费文本编辑器，支持 JavaScript、HTML、CSS 等语言，有丰富的插件可以提升开发体验。<strong>点击这里下载<a target="_blank" rel="noopener" href="https://code.visualstudio.com/Download">Download Visual Studio Code - Mac, Linux, Windows</a></strong></p>
</li>
<li><p><strong>Sublime Text</strong>：轻量级的编辑器，支持快速编辑和预览代码。<strong>点击这里下载<a target="_blank" rel="noopener" href="https://www.sublimetext.com/download">Download - Sublime Text</a></strong></p>
</li>
</ul>
<p>以上工具准备好以后，就可以开始让AI帮忙写代码，我这里是使用的是Devv.ai里面的GPT-40 mini，下面就是我和 ChatGPT 沟通的过程，我会把关键部分的全部贴出来。</p>
<h2 id="开始让ChatGPT写代码"><a href="#开始让ChatGPT写代码" class="headerlink" title="开始让ChatGPT写代码"></a>开始让ChatGPT写代码</h2><h3 id="我的提问1："><a href="#我的提问1：" class="headerlink" title="我的提问1："></a>我的提问1：</h3><p>【我想开发一个 chrome网页插件，这个插件可以在在 boss直聘的网站上公司详细介绍部分的旁边显示搜索按钮，点击搜索按钮可以直接跳转到搜索【天眼查】中该公司的信息，请帮忙提供完整的项目代码。】</p>
<h3 id="ChatGPT-回答1："><a href="#ChatGPT-回答1：" class="headerlink" title="ChatGPT 回答1："></a>ChatGPT 回答1：</h3><p>要创建一个 Chrome 扩展程序，在BOSS直聘网站上的公司详细信息旁边添加一个搜索按钮，该按钮会重定向到天眼查以获取公司信息，您可以按照以下步骤操作。以下是项目代码的完整示例。</p>
<h3 id="1-创建项目结构"><a href="#1-创建项目结构" class="headerlink" title="1. 创建项目结构"></a>1. 创建项目结构</h3><p>为您的 Chrome 扩展程序创建一个文件夹，例如<code>boss-zhipin-search</code> 。在此文件夹中，创建以下文件：</p>
<ul>
<li><code>manifest.json</code></li>
<li><code>content.js</code></li>
<li><code>styles.css</code></li>
</ul>
<h3 id="2-manifest-json"><a href="#2-manifest-json" class="headerlink" title="2. manifest.json"></a>2. <code>manifest.json</code></h3><p>该文件包含有关您的扩展的元数据。</p>
<pre><code class="json">&#123;
  &quot;manifest_version&quot;: 3,
  &quot;name&quot;: &quot;Boss Zhipin Search Button&quot;,
  &quot;version&quot;: &quot;1.0&quot;,
  &quot;description&quot;: &quot;Adds a search button next to company details on Boss Zhipin.&quot;,
  &quot;permissions&quot;: [&quot;activeTab&quot;],
  &quot;content_scripts&quot;: [
    &#123;
      &quot;matches&quot;: [&quot;https://www.zhipin.com/*&quot;],
      &quot;js&quot;: [&quot;content.js&quot;],
      &quot;css&quot;: [&quot;styles.css&quot;]
    &#125;
  ],
  &quot;action&quot;: &#123;
    &quot;default_popup&quot;: &quot;popup.html&quot;,
    &quot;default_icon&quot;: &#123;
      &quot;16&quot;: &quot;images/icon16.png&quot;,
      &quot;48&quot;: &quot;images/icon48.png&quot;,
      &quot;128&quot;: &quot;images/icon128.png&quot;
    &#125;
  &#125;
&#125;
</code></pre>
<h3 id="3-content-js"><a href="#3-content-js" class="headerlink" title="3. content.js"></a>3. <code>content.js</code></h3><p>该脚本将在Boss直聘网站上运行并添加搜索按钮。</p>
<pre><code class="javascript">// Function to create and insert the search button
function addSearchButton() &#123;
    // Find the company details section
    const companyDetail = document.querySelector(&#39;.company-detail&#39;); // Adjust the selector based on the actual class used on the site
    if (companyDetail) &#123;
        // Create the button
        const searchButton = document.createElement(&#39;button&#39;);
        searchButton.innerText = &#39;Search on Tianyancha&#39;;
        searchButton.className = &#39;search-button&#39;;
        searchButton.onclick = function() &#123;
            const companyName = document.querySelector(&#39;.company-name&#39;).innerText; // Adjust the selector based on the actual class used on the site
            const searchUrl = `https://www.tianyancha.com/search?key=$&#123;encodeURIComponent(companyName)&#125;`;
            window.open(searchUrl, &#39;_blank&#39;);
        &#125;;

        // Insert the button next to the company detail section
        companyDetail.appendChild(searchButton);
    &#125;
&#125;

// Run the function after the page loads
window.onload = addSearchButton;
</code></pre>
<h3 id="4-styles-css"><a href="#4-styles-css" class="headerlink" title="4. styles.css"></a>4. <code>styles.css</code></h3><p>该文件包含搜索按钮的样式。</p>
<pre><code class="css">.search-button &#123;
    margin-left: 10px;
    padding: 5px 10px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
&#125;

.search-button:hover &#123;
    background-color: #0056b3;
&#125;
</code></pre>
<h3 id="5-在-Chrome-中加载扩展程序"><a href="#5-在-Chrome-中加载扩展程序" class="headerlink" title="5.在 Chrome 中加载扩展程序"></a>5.在 Chrome 中加载扩展程序</h3><ol>
<li>打开 Chrome 并转到<code>chrome://extensions/</code> 。</li>
<li>启用右上角的“开发者模式”。</li>
<li>单击“加载解压的文件”并选择您在其中创建扩展的文件夹。</li>
</ol>
<h3 id="6-测试扩展"><a href="#6-测试扩展" class="headerlink" title="6. 测试扩展"></a>6. 测试扩展</h3><p>导航至老板直聘网站，检查公司详细信息旁边是否出现搜索按钮。单击它应该会打开一个新选项卡，其中包含该公司的天眼查搜索结果。</p>
<h3 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h3><p>请务必根据Boss直聘网站的实际结构调整<code>content.js</code>文件中的选择器，因为它们可能会随着时间的推移而变化</p>
<hr>
<h2 id="我的提问2"><a href="#我的提问2" class="headerlink" title="我的提问2"></a>我的提问2</h2><p>因为我不知道完整的项目文件夹是什么样的，所以我问 ChatGPT【我的boss-zhipin-search项目文件夹是什么样的】</p>
<h2 id="ChatGPT-回答2"><a href="#ChatGPT-回答2" class="headerlink" title="ChatGPT 回答2"></a>ChatGPT 回答2</h2><p>对于您的<code>boss-zhipin-search</code> Chrome 扩展项目，应组织文件夹结构以清楚地区分扩展程序的不同组件。以下是专门针对您的项目建议的文件夹结构：</p>
<p>boss-zhipin-search&#x2F;<br>│<br>├── manifest.json           # Metadata for the Chrome extension<br>├── content.js                 # Script to add the search button on the webpage<br>├── styles.css                 # CSS styles for the search button<br>├── popup.html              # Optional: Popup HTML for the extension (if needed)<br>├── images&#x2F;                    # Optional: Folder for icons or images used in the extension<br>│   ├── icon16.png           # 16x16 icon<br>│   ├── icon48.png          # 48x48 icon<br>│   └── icon128.png         # 128x128 icon<br>│<br>└── README.md              # Documentation for the project</p>
<h3 id="解释每个文件夹的内容"><a href="#解释每个文件夹的内容" class="headerlink" title="解释每个文件夹的内容"></a>解释每个文件夹的内容</h3><ul>
<li><p><strong>manifest.json</strong> ：此文件包含 Chrome 扩展程序的元数据，包括权限、版本和要加载的脚本。</p>
</li>
<li><p><strong>content.js</strong> ：这是将在老板直聘网站上运行的 JavaScript 文件。它包含在公司详细信息旁边添加搜索按钮的逻辑。</p>
</li>
<li><p><strong>styles.css</strong> ：此文件包含搜索按钮的 CSS 样式，确保其在网页上看起来不错。</p>
</li>
<li><p><strong>popup.html</strong> ：（可选）如果您想在单击图标时为扩展程序创建弹出窗口，则可以包含此文件。</p>
</li>
<li><p><strong>images&#x2F;</strong> ：（可选）用于存储您可能在扩展程序中使用的任何图标或图像的文件夹。您可以为扩展程序图标添加不同的大小。</p>
</li>
<li><p><strong>README.md</strong> ：一个 markdown 文件，提供有关您的项目的文档，包括设置说明、用法和任何其他相关信息。</p>
</li>
</ul>
<h3 id="提醒"><a href="#提醒" class="headerlink" title="提醒"></a>提醒</h3><p>请务必根据您的具体要求以及您想要在 Chrome 扩展程序中实现的功能来调整<code>manifest.json</code> 、 <code>content.js</code>和<code>styles.css</code>文件的内容。</p>
<hr>
<p><strong>这里我看到</strong>【popup.html ：（可选）如果您想在单击图标时为扩展程序创建弹出窗口，则可以包含此文件。】，我的插件不需要在地址栏的拓展图标上创建弹出窗口。所以我问 ChatGPT，我的项目是否不需要popup.html 。</p>
<hr>
<h2 id="我的提问3"><a href="#我的提问3" class="headerlink" title="我的提问3"></a>我的提问3</h2><p>“default_popup”: “popup.html”。根据我的需求，是不是不需要</p>
<h2 id="ChatGPT-回答3"><a href="#ChatGPT-回答3" class="headerlink" title="ChatGPT 回答3"></a>ChatGPT 回答3</h2><p>是的，根据您的要求，您的<code>manifest.json</code>文件中不需要<code>&quot;default_popup&quot;: &quot;popup.html&quot;</code>条目。由于您的扩展程序旨在直接在老板直聘网站上添加搜索按钮，而不需要弹出界面，因此您可以删除该行。</p>
<p>如果没有弹出窗口， <code>manifest.json</code>的内容如下：</p>
<pre><code class="json">&#123;
  &quot;manifest_version&quot;: 3,
  &quot;name&quot;: &quot;Boss Zhipin Search Button&quot;,
  &quot;version&quot;: &quot;1.0&quot;,
  &quot;description&quot;: &quot;Adds a search button next to company details on Boss Zhipin.&quot;,
  &quot;permissions&quot;: [&quot;activeTab&quot;],
  &quot;content_scripts&quot;: [
    &#123;
      &quot;matches&quot;: [&quot;https://www.zhipin.com/*&quot;],
      &quot;js&quot;: [&quot;content.js&quot;],
      &quot;css&quot;: [&quot;styles.css&quot;]
    &#125;
  ]
&#125;
</code></pre>
<p>通过直接在网页上添加搜索按钮，此配置足以让您的扩展按预期运行。</p>
<hr>
<h2 id="创建项目文件"><a href="#创建项目文件" class="headerlink" title="创建项目文件"></a>创建项目文件</h2><ol>
<li><p>首先新建一个名为<code>boss-zhipin-search</code>的文件夹来存放项目文件。</p>
</li>
<li><p>打开 <strong>Sublime Text</strong>（这里我是使用Sublime，你也可以其它的文本编辑器），把ChatGPT 给的<code>manifest.json</code>、<code>content.js</code>、<code>styles.css</code>里的代码复制到Sublime中，并分别以<code>manifest.json</code>、<code>content.js</code>、<code>styles.css</code>来命名保存到项目的文件夹中。</p>
</li>
<li><p>保存上面的文件，在浏览器测试一下，没有报错。打开 boss直聘的任意一个职位详情，但是也没有看到我的搜索按钮。是因为代码 <code>content.js</code>中没有找到显示搜索按钮的元素的位置 。我们需要打开浏览器的【检查】模式，代码中找到显示公司名字的元素，告诉 ChatGPT 在这个元素旁边显示搜索按钮。</p>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/Alanrk/blogimg/main/companyname.gif"></p>
<hr>
<h2 id="我的提问4"><a href="#我的提问4" class="headerlink" title="我的提问4"></a>我的提问4</h2><p> 我想在company-name旁边显示搜索按钮，如何修改代码</p>
<h2 id="ChatGPT回答4"><a href="#ChatGPT回答4" class="headerlink" title="ChatGPT回答4"></a>ChatGPT回答4</h2><p>要在提供的 HTML 结构中的公司名称旁边显示搜索按钮，您需要修改<code>content.js</code>文件以专门针对具有类<code>company-name</code>的<code>li</code>元素，并在其旁边附加按钮。以下是完成此操作的更新后的<code>content.js</code>代码：</p>
<h3 id="更新了content-js"><a href="#更新了content-js" class="headerlink" title="更新了content.js"></a>更新了<code>content.js</code></h3><pre><code class="javascript">// Function to create and insert the search button next to the company name
function addSearchButton() &#123;
    // Find the company name element
    const companyNameElement = document.querySelector(&#39;.company-name&#39;);
    if (companyNameElement) &#123;
        // Create the button
        const searchButton = document.createElement(&#39;button&#39;);
        searchButton.innerText = &#39;Search on Tianyancha&#39;;
        searchButton.className = &#39;search-button&#39;;
        searchButton.onclick = function() &#123;
            const companyName = companyNameElement.innerText.replace(&#39;公司名称&#39;, &#39;&#39;).trim(); // Extract the company name
            const searchUrl = `https://www.tianyancha.com/search?key=$&#123;encodeURIComponent(companyName)&#125;`;
            window.open(searchUrl, &#39;_blank&#39;);
        &#125;;

        // Insert the button next to the company name
        companyNameElement.appendChild(searchButton);
    &#125;
&#125;

// Run the function after the page loads
window.onload = addSearchButton;
</code></pre>
<h3 id="代码解释"><a href="#代码解释" class="headerlink" title="代码解释"></a>代码解释</h3><ol>
<li><p><strong>定位公司名称</strong>：代码使用<code>document.querySelector(&#39;.company-name&#39;)</code>选择包含公司名称的<code>li</code>元素。</p>
</li>
<li><p><strong>创建按钮</strong>：创建一个带有文本“天眼查搜索”的按钮。</p>
</li>
<li><p><strong>按钮单击事件</strong>：单击按钮时，它会通过删除“公司名称”标签和任何前导&#x2F;尾随空格来提取公司名称。然后它构建天眼查的搜索 URL。</p>
</li>
<li><p><strong>附加按钮</strong>：按钮附加到<code>company-name</code>元素，将其直接放置在列表中公司名称的旁边。</p>
</li>
</ol>
<h3 id="CSS-styles-css"><a href="#CSS-styles-css" class="headerlink" title="CSS (styles.css)"></a>CSS (styles.css)</h3><p>确保您的<code>styles.css</code>文件中有以下 CSS 来设置按钮的样式：</p>
<pre><code class="css">.search-button &#123;
    margin-left: 10px; /* Space between the company name and the button */
    padding: 5px 10px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
&#125;

.search-button:hover &#123;
    background-color: #0056b3;
&#125;
</code></pre>
<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p>经过这些更改，当您加载boss直聘网站时，您应该会在公司名称旁边看到“在天眼查上搜索”按钮。单击该按钮将打开一个新选项卡，其中包含该公司在天眼查上的搜索结果。</p>
<hr>
<h2 id="更新项目代码"><a href="#更新项目代码" class="headerlink" title="更新项目代码"></a>更新项目代码</h2><p>按照 ChatGPT 给的代码，更新<code>styles.css</code>和<code>content.js</code> 并保存后，在拓展管理页面，重新加载拓展，然后再刷新 boss直聘职位详情的页面。可以看到，搜索按钮并没有显示在我们预想的位置上，原因是这个页面上有多个<code>company-name</code>元素，所以程序在找到第一个<code>company-name</code>元素后面就显示在第一个<code>company-name</code>的后面了。我们需要对<code>company-name</code>进行限制，找到它的父元素，告诉程序是在哪个父元素下的<code>company-name</code>才显示。还是和之前一样，在页面右键选择检查模式，查看<code>company-name</code>的父元素是哪一个，经过查看是ul class&#x3D;”level-list”下面的li class&#x3D;”company-name”。所以提问给ChatGPT，让它更新代码。<br><img src="https://raw.githubusercontent.com/Alanrk/blogimg/main/202408211753485.png"></p>
<p><img src="https://raw.githubusercontent.com/Alanrk/blogimg/main/202408211759183.png"></p>
<hr>
<h2 id="我的提问5"><a href="#我的提问5" class="headerlink" title="我的提问5"></a>我的提问5</h2><p>.company-name在页面上有多个，我只想让它在ul class&#x3D;”level-list”下的li class&#x3D;”company-name”显示</p>
<h2 id="ChatGPT-回答-5"><a href="#ChatGPT-回答-5" class="headerlink" title="ChatGPT 回答 5"></a>ChatGPT 回答 5</h2><p>为了确保搜索按钮仅添加到类<code>company-name</code>的<code>li</code>元素旁边，该元素专门位于类<code>level-list</code>的<code>ul</code>中，您可以修改<code>content.js</code>文件中的选择器。您可以这样做：</p>
<h3 id="更新content-js"><a href="#更新content-js" class="headerlink" title="更新content.js"></a>更新<code>content.js</code></h3><pre><code class="javascript">// Function to create and insert the search button next to the company name in the specified list
function addSearchButton() &#123;
    // Find the specific company name element within the level-list
    const companyNameElement = document.querySelector(&#39;.level-list .company-name&#39;);
    if (companyNameElement) &#123;
        // Create the button
        const searchButton = document.createElement(&#39;button&#39;);
        searchButton.innerText = &#39;Search on Tianyancha&#39;;
        searchButton.className = &#39;search-button&#39;;
        searchButton.onclick = function() &#123;
            const companyName = companyNameElement.innerText.replace(&#39;公司名称&#39;, &#39;&#39;).trim(); // Extract the company name
            const searchUrl = `https://www.tianyancha.com/search?key=$&#123;encodeURIComponent(companyName)&#125;`;
            window.open(searchUrl, &#39;_blank&#39;);
        &#125;;

        // Insert the button next to the company name
        companyNameElement.appendChild(searchButton);
    &#125;
&#125;

// Run the function after the page loads
window.onload = addSearchButton;
</code></pre>
<h3 id="变更说明"><a href="#变更说明" class="headerlink" title="变更说明"></a>变更说明</h3><ol>
<li><p><strong>选择器更新</strong>： <code>document.querySelector(&#39;.level-list .company-name&#39;)</code>中的选择器已更新，以专门针对具有类<code>company-name</code>的<code>li</code>元素，该元素是具有类<code>level-list</code>的<code>ul</code>的后代。这可确保仅选择所需的公司名称元素。</p>
</li>
<li><p><strong>按钮创建和插入</strong>：代码的其余部分保持不变，其中创建按钮并将其附加到所选公司名称旁边。</p>
</li>
</ol>
<h3 id="结果-1"><a href="#结果-1" class="headerlink" title="结果"></a>结果</h3><p>通过此修改，搜索按钮将仅出现在指定<code>level-list</code>内的<code>company-name</code>旁边，确保它不会影响页面上其他位置可能存在的<code>company-name</code>的其他实例。</p>
<hr>
<h2 id="更新项目代码-1"><a href="#更新项目代码-1" class="headerlink" title="更新项目代码"></a>更新项目代码</h2><p>更新<code>content.js</code>的代码并保存，和之前一样，在插件管理页面重新载入插件，刷新boss直聘的页面查看效果。</p>
<p>可以看到按钮已经显示在公司名字的后面了，点击也可以跳转到天眼查的搜索结果页面。但是跳转到天眼查的公司名字后面带上了’Search on Tianyancha’，这个文案是我们不想要的。于是继续提问 ChatGPT。</p>
<p><img src="https://raw.githubusercontent.com/Alanrk/blogimg/main/202408211812020.png"><img src="https://raw.githubusercontent.com/Alanrk/blogimg/main/202408211815194.png"></p>
<hr>
<h2 id="我的提问-6"><a href="#我的提问-6" class="headerlink" title="我的提问 6"></a>我的提问 6</h2><p>跳转到天眼查后面的搜索词的Search on Tianyancha，我想去掉。</p>
<h2 id="ChatGPT-回答-6"><a href="#ChatGPT-回答-6" class="headerlink" title="ChatGPT 回答 6"></a>ChatGPT 回答 6</h2><p>如果您想修改功能，使“天眼查搜索”按钮重定向到天眼查时 URL 中不包含公司名称，您只需调整<code>content.js</code>文件中的<code>onclick</code>事件处理程序即可。操作方法如下：</p>
<h3 id="更新content-js-1"><a href="#更新content-js-1" class="headerlink" title="更新content.js"></a>更新<code>content.js</code></h3><pre><code class="javascript">// Function to create and insert the search button next to the company name in the specified list
function addSearchButton() &#123;
    // Find the specific company name element within the level-list
    const companyNameElement = document.querySelector(&#39;.level-list .company-name&#39;);
    if (companyNameElement) &#123;
        // Create the button
        const searchButton = document.createElement(&#39;button&#39;);
        searchButton.innerText = &#39;Search on Tianyancha&#39;;
        searchButton.className = &#39;search-button&#39;;
        searchButton.onclick = function() &#123;
            // Redirect to Tianyancha without any search term
            const searchUrl = `https://www.tianyancha.com/`; // Just the base URL
            window.open(searchUrl, &#39;_blank&#39;);
        &#125;;

        // Insert the button next to the company name
        companyNameElement.appendChild(searchButton);
    &#125;
&#125;

// Run the function after the page loads
window.onload = addSearchButton;
</code></pre>
<h3 id="变更说明-1"><a href="#变更说明-1" class="headerlink" title="变更说明"></a>变更说明</h3><ol>
<li><strong>搜索 URL 修改</strong>：构建搜索 URL 的行已更改为仅指向天眼查的基本 URL： <code>const searchUrl =</code> <a target="_blank" rel="noopener" href="https://www.tianyancha.com/%60;%60">https://www.tianyancha.com/<code>;</code></a> 。这意味着，当单击该按钮时，将打开天眼查主页，其中不包含任何搜索词。</li>
</ol>
<h3 id="结果-2"><a href="#结果-2" class="headerlink" title="结果"></a>结果</h3><p>通过此更改，单击“在天眼查上搜索”按钮会将用户重定向到天眼查主页，而无需附加任何搜索词。</p>
<hr>
<p>可以看到，上面 ChatGPT 理解错我的意思了。于是我再次重新描述我的问题。</p>
<hr>
<h2 id="我的提问7"><a href="#我的提问7" class="headerlink" title="我的提问7"></a>我的提问7</h2><p>你理解错我的意思了，我是想让搜索词后面的Search on Tianyancha去掉。只显示天眼查</p>
<hr>
<p><strong>这里我提问错了，就不展示ChatGPT 的回答了。我想到一个办法，让 ChatGPT 来解释获取公司名字的代码的逻辑是什么，这样看下怎么来修改逻辑</strong></p>
<h2 id="我的提问8"><a href="#我的提问8" class="headerlink" title="我的提问8"></a>我的提问8</h2><p>const companyName &#x3D; companyNameElement.innerText.replace(‘公司名称’, ‘’).trim(); 这段代码是什么意思</p>
<h2 id="ChatGPT-回答-8"><a href="#ChatGPT-回答-8" class="headerlink" title="ChatGPT 回答 8"></a>ChatGPT 回答 8</h2><p> 代码行：</p>
<pre><code class="javascript">const companyName = companyNameElement.innerText.replace(&#39;公司名称&#39;, &#39;&#39;).trim();
</code></pre>
<h3 id="解释"><a href="#解释" class="headerlink" title="解释:"></a>解释:</h3><ol>
<li><p><strong><code>companyNameElement.innerText</code></strong> ：这将检索<code>companyNameElement</code>的文本内容，该元素是一个HTML 元素（在本例中是一个具有<code>company-name</code>类的<code>li</code>元素）。文字可能类似于“公司名称鞍上灵感（上海）品牌策划有限公司”。</p>
</li>
<li><p><strong><code>.replace(&#39;公司名称&#39;, &#39;&#39;)</code></strong> ：此方法调用将子字符串<code>&#39;公司名称&#39;</code> （中文意思是“公司名称”）替换为空字符串<code>&#39;&#39;</code> 。这有效地从字符串中删除了文本的特定部分。所以，如果原来的文字是“公司名称鞍上灵感（上海）品牌策划有限公司”，经过这次操作，就变成了“鞍上灵感（上海）品牌策划有限公司”。</p>
</li>
<li><p><strong><code>.trim()</code></strong> ：此方法从结果字符串中删除任何前导或尾随空格。这对于确保替换后字符串的开头或结尾没有多余的空格很有用。</p>
</li>
</ol>
<h3 id="最终结果"><a href="#最终结果" class="headerlink" title="最终结果:"></a>最终结果:</h3><p><code>companyName</code>的最终值将是清理后的公司名称，没有“公司名称”前缀，也没有任何额外的空格。例如，如果原文为“公司名称鞍上灵感（上海）品牌策划有限公司”，则<code>companyName</code>的最终值为“鞍上灵感（上海）品牌策划有限公司”。</p>
<hr>
<h2 id="我的提问9"><a href="#我的提问9" class="headerlink" title="我的提问9"></a>我的提问9</h2><p>跳转到天眼查后搜索词默认带有Search on Tianyancha，例如鞍上灵感（上海）品牌策划有限公司Search on Tianyancha。我想去掉跳转后的搜索词Search on Tianyancha。</p>
<h2 id="ChatGPT回答9"><a href="#ChatGPT回答9" class="headerlink" title="ChatGPT回答9"></a>ChatGPT回答9</h2><p>如果您想确保重定向到天眼查时，公司名称中没有附加“天眼查”等其他文字，则需要确保您为重定向构建的 URL 仅包含公司名称本身。</p>
<p>下面介绍了如何在 JavaScript 代码中实现此目的：</p>
<h3 id="更新content-js-2"><a href="#更新content-js-2" class="headerlink" title="更新content.js"></a>更新<code>content.js</code></h3><pre><code class="javascript">// Function to create and insert the search button next to the company name in the specified list
function addSearchButton() &#123;
    // Find the specific company name element within the level-list
    const companyNameElement = document.querySelector(&#39;.level-list .company-name&#39;);
    if (companyNameElement) &#123;
        // Create the button
        const searchButton = document.createElement(&#39;button&#39;);
        searchButton.innerText = &#39;天眼查&#39;; // Change button text to &quot;天眼查&quot;
        searchButton.className = &#39;search-button&#39;;
        searchButton.onclick = function() &#123;
            // Extract the company name and remove any unwanted text
            const companyName = companyNameElement.innerText.replace(&#39;公司名称&#39;, &#39;&#39;).trim(); // Clean the company name
            const searchUrl = `https://www.tianyancha.com/search?key=$&#123;encodeURIComponent(companyName)&#125;`; // Construct search URL
            window.open(searchUrl, &#39;_blank&#39;); // Open the search URL in a new tab
        &#125;;

        // Insert the button next to the company name
        companyNameElement.appendChild(searchButton);
    &#125;
&#125;

// Run the function after the page loads
window.onload = addSearchButton;
</code></pre>
<h3 id="代码解释-1"><a href="#代码解释-1" class="headerlink" title="代码解释:"></a>代码解释:</h3><ol>
<li><p><strong>按钮创建</strong>：创建一个标记为“天眼查”的按钮并将其附加到公司名称元素上。</p>
</li>
<li><p><strong>公司名称提取</strong>：行<code>const companyName = companyNameElement.innerText.replace(&#39;公司名称&#39;, &#39;&#39;).trim();</code>通过删除“公司名称”前缀来清理公司名称。</p>
</li>
<li><p><strong>搜索 URL 构建</strong>：使用清理后的公司名称构建搜索 URL。 <code>encodeURIComponent(companyName)</code>函数确保公司名称经过正确编码以供在 URL 中使用。</p>
</li>
<li><p><strong>打开URL</strong> ：当点击该按钮时，会在新选项卡中打开构建的搜索URL，该URL将仅包含公司名称作为搜索词，而不会包含任何其他文本，例如“在天眼查上搜索”。</p>
</li>
</ol>
<h3 id="结果："><a href="#结果：" class="headerlink" title="结果："></a>结果：</h3><p>通过此设置，当您单击“天眼查”按钮时，它会将您重定向到天眼查，仅以公司名称作为搜索词，而不会附加任何不需要的文本。</p>
<h2 id="代码测试"><a href="#代码测试" class="headerlink" title="代码测试"></a>代码测试</h2>
        </div>
        
        

    

</div>
<div class="post-header">
    <a class="go-home" href="javascript:history.back();">
        <svg width="8" height="14" viewBox="0 0 8 14">
            <path d="M7 1L1 7l6 6" stroke="#000" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </a>
</div>

<script>
    // 检查历史记录
    if (window.history.length <= 1) {
        document.querySelector('.go-home').setAttribute('href', '/'); // 修改为你自己网站的首页链接
    }
</script>


    <section id="comments">
        <div id="valine_thread"></div>
        <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
        <script>
            var META_INFO = ['nick','mail','link'], 
                meta = 'nick,mail,link'.split(',').filter(function(item){
                    return META_INFO.indexOf(item) > -1
                }),
                serverURLs = 'https://WhfAxAAT.api.lncldglobal.com',
                vConfig = {
                    el: '#valine_thread',
                    meta: meta,
                    appId: "WhfAxAATNFjUxHMZx1Q4DqZ5-MdYXbMMI",
                    appKey: "R4DdgB62dR3ZB8hu3SI7YAKU",
                    placeholder: "Just go go",
                    pageSize:'10',
                    avatar:'mp',
                    lang:'zh-CN',
                    recordIP: 'false',
                    enableQQ: 'false',
                };
            if(!!serverURLs) vConfig['serverURLs'] = serverURLs;
            var v = new Valine(vConfig);
            window.v = v
        </script>
    </section>


                <div class="footer">
    <span id="copyright-year">Copyright © <span id="year"></span> OrionWang  <a href="https://github.com/Alanrk/hexo-theme-onenote" target="_blank" >Theme-onenote</a></span>
    <script type="text/javascript">
     document.addEventListener('DOMContentLoaded', function() {
      var yearElement = document.getElementById('year');
      if (yearElement) {
        var currentYear = new Date().getFullYear();
        yearElement.textContent = currentYear;
      }
    });
    
    window.addEventListener('touchstart', function(event) {
    // 处理 touchstart 事件的逻辑
    // 如果不需要调用 event.preventDefault()，可以将事件处理程序标记为 'passive'
     }, { passive: true });
   </script>

</div>


            </div>
        </div>
    </body>
</html>